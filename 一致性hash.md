# 一致性hash算法



### 一致性hash原理

1. 将哈希值空间组织成一个虚拟的圆环，hash值空间0-2^32-1；
2.  对服务节点做hash映射到hash环

3. 数据节点做hash取模，按顺时针存到下一个服务节点



### 添加服务节点影响

使得一部分数据失效

### 剔除服务节点影响

一部分数据失效

### hash环数据倾斜

使用虚拟节点

真实节点映射出多个虚拟节点

使用时先找出虚拟节点然后根据映射关系找出真是节点s